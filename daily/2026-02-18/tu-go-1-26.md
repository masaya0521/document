# Go 1.26 — Green Tea GC、SIMD、go fix の大幅刷新

- **日付**: 2026-02-18
- **カテゴリ**: Language
- **ソース**: [Go Blog](https://go.dev/blog/go1.26), [リリースノート](https://go.dev/doc/go1.26)

## 概要

Go 1.26 は 2026年2月10日にリリースされた。Go 1.25 から6ヶ月ぶりのリリースであり、言語仕様の変更、パフォーマンスの大幅改善、ツールチェーンの刷新、新しい標準ライブラリパッケージの追加など、多岐にわたるアップデートが含まれる。

特に注目すべきは、実験的だった Green Tea ガベージコレクタがデフォルト有効化されたこと、`go fix` コマンドの完全刷新、そして実験的な SIMD パッケージの導入である。

## 主な変更点

### 言語変更

**`new` 関数の拡張**: `new` の引数に式を渡して初期値を指定できるようになった。

```go
// 従来
x := int64(300)
ptr := &x

// Go 1.26
ptr := new(int64(300))
```

**ジェネリクスの自己参照型パラメータ**: ジェネリック型が自身の型パラメータリストで自分自身を参照できるようになり、複雑なデータ構造（ツリー、グラフなど）やインターフェースの実装が簡素化された。

### パフォーマンス改善

- **Green Tea GC**: 実験的段階を経てデフォルト有効化。GC のレイテンシとスループットのバランスが改善
- **cgo オーバーヘッド**: ベースラインのオーバーヘッドが約30%削減。C ライブラリとの連携が多いプロジェクトで恩恵
- **スタック割り当ての最適化**: コンパイラがスライスのバッキングストアをスタックに割り当て可能な状況が増加し、ヒープ割り当て削減

### ツール改善

**`go fix` コマンドの完全刷新**:
- Go analysis フレームワークを使って完全に書き直された
- 数十の「modernizers」（モダナイザー）アナライザーを搭載
- 既存コードを新しい言語機能・標準ライブラリに安全に移行するための修正を提案
- `//go:fix inline` ディレクティブにより関数呼び出しのインライン化が可能

### 新しい標準ライブラリパッケージ

| パッケージ | 概要 |
|-----------|------|
| `crypto/hpke` | Hybrid Public Key Encryption (HPKE) の実装。RFC 9180 準拠、ポスト量子ハイブリッド KEM をサポート |
| `crypto/mlkem/mlkemtest` | ML-KEM（ポスト量子暗号）のテストユーティリティ |
| `testing/cryptotest` | 暗号テスト機能 |

### 実験的機能

| 機能 | 概要 |
|------|------|
| `simd/archsimd` | アーキテクチャ固有の SIMD 操作へのアクセス。amd64 で 128/256/512 ビットベクタ型（`Int8x16`, `Float64x8` 等）をサポート。`GOEXPERIMENT=simd` で有効化 |
| `runtime/secret` | 秘密情報操作時の一時データの安全な削除 |
| `goroutineleak` プロファイル | リークしたゴルーチンの検出 |

## 今後の注目点

- **Green Tea GC の実運用評価**: デフォルト有効化により、大規模プロダクション環境でのフィードバックが集まる。レイテンシ改善の実績データに注目
- **SIMD パッケージの安定化**: 現在は amd64 のみだが、arm64 対応が進めば、画像処理や暗号計算などの高パフォーマンス領域で Go の競争力が向上
- **`go fix` modernizers の拡充**: コミュニティからの modernizer 追加が期待される。大規模コードベースの自動モダナイゼーションツールとしての活用
- **ポスト量子暗号**: `crypto/hpke` と ML-KEM サポートにより、Go がポスト量子暗号への移行を先導する立場に
